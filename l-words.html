<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ø¨ÙÙŠÙ’Ù† - Ø§Ù„ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ø¯Ø®ÙŠÙ„Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</title>
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700&display=swap" rel="stylesheet">

  <style>
    * {
      box-sizing: border-box;
      font-family: 'Cairo', sans-serif;
    }

    body {
      margin: 0;
      background-color: #fff;
      color: #000;
      text-align: center;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }

    /* ğŸ”¹ Ø§Ù„ØªÙˆØ¨ Ø¨Ø§Ø± */
    header {
      background-color: #0e6666;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 10px 25px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }

    header img {
      height: 45px;
      border-radius: 10px;
    }

    header h1 {
      font-size: 20px;
      color: #004f4f;
      margin: 0;
      font-weight: 700;
    }

    /* ğŸ”¹ Ø§Ù„ÙÙˆØªØ± */
    footer {
      background-color: #eafafa;
      border-top: 2px solid #4fc3c3;
      padding: 20px;
      text-align: center;
      margin-top: auto;
    }

    footer a {
      color: #007b7b;
      text-decoration: none;
      margin: 0 10px;
      font-weight: 600;
    }

    footer a:hover {
      text-decoration: underline;
    }

    .container {
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      max-width: 1200px;
      margin: 0 auto;
    }

    .tool-box {
      background-color: #73d8d8;
      border-radius: 20px;
      padding: 25px;
      width: 80%;
      max-width: 350px;
      margin: 40px auto;
    }

    .tool-box label {
      display: block;
      margin-bottom: 8px;
      font-weight: 600;
    }

    input, select {
      width: 100%;
      padding: 10px;
      border-radius: 10px;
      border: none;
      font-size: 16px;
      text-align: center;
      margin-bottom: 15px;
    }

    button {
      width: 100%;
      padding: 10px;
      background-color: #6ef3f3;
      border: none;
      border-radius: 10px;
      font-size: 18px;
      font-weight: 600;
      cursor: pointer;
      color: #000;
      transition: background-color 0.3s;
    }

    button:hover {
      background-color: #4fc3c3;
    }

    button:disabled {
      background-color: #cccccc;
      cursor: not-allowed;
    }

    .results-section {
      flex: 1;
      padding: 20px;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 25px;
    }

    .result-card {
      width: 85%;
      max-width: 450px;
      background-color: #eafafa;
      border: 2px solid #4fc3c3;
      border-radius: 15px;
      padding: 20px;
      text-align: right;
      box-shadow: 0 3px 8px rgba(0,0,0,0.1);
      transition: transform 0.2s ease;
    }

    .result-card:hover {
      transform: scale(1.02);
    }

    .arabic-word {
      font-size: 22px;
      font-weight: bold;
      color: #2a7e7e;
      margin-bottom: 15px;
      padding-bottom: 10px;
      border-bottom: 1px dashed #4fc3c3;
    }

    .origin-label {
      display: inline-block;
      background-color: #4fc3c3;
      color: white;
      border-radius: 10px;
      padding: 5px 15px;
      font-size: 18px;
      margin-bottom: 10px;
    }

    .meaning-label {
      display: inline-block;
      background-color: #f9a826;
      color: white;
      border-radius: 10px;
      padding: 5px 15px;
      font-size: 18px;
      margin-bottom: 10px;
    }

    .origin, .meaning {
      margin: 5px 0 0 0;
      font-size: 18px;
      line-height: 1.6;
      color: #333;
    }

    .loading {
      display: inline-block;
      width: 20px;
      height: 20px;
      border: 3px solid rgba(255,255,255,.3);
      border-radius: 50%;
      border-top-color: #fff;
      animation: spin 1s ease-in-out infinite;
    }

    .error-message {
      background-color: #ffebee;
      border: 2px solid #f44336;
      border-radius: 15px;
      padding: 20px;
      margin: 20px;
      color: #d32f2f;
      font-weight: bold;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    /* ØªØ­Ø³ÙŠÙ†Ø§Øª Ù„Ù„Ø´Ø§Ø´Ø§Øª Ø§Ù„ÙƒØ¨ÙŠØ±Ø© */
    @media (min-width: 768px) {
      .container {
        box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);
      }
      
      .tool-box {
        max-width: 500px;
        padding: 40px;
      }
      
      .results-section {
        flex-direction: row;
        flex-wrap: wrap;
        justify-content: center;
        gap: 30px;
      }
      
      .result-card {
        width: 45%;
        max-width: 500px;
      }
    }

    @media (min-width: 1024px) {
      .result-card {
        width: 30%;
      }
      
      .tool-box {
        max-width: 600px;
      }
    }
  </style>
</head>

<body>
  <!-- âœ… Ø§Ù„ØªÙˆØ¨ Ø¨Ø§Ø± Ø§Ù„Ø¬Ø¯ÙŠØ¯ -->
  <header>
    <img src="images/logo.PNG">
  </header>

  <div class="container">
    <div class="tool-box">
      <label for="word-input">Ø§Ø¨Ø­Ø« Ø¹Ù† ÙƒÙ„Ù…Ø©:</label>
      <input type="text" id="word-input" placeholder="Ø§ÙƒØªØ¨ Ø§Ù„ÙƒÙ„Ù…Ø© (Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©)">

      <label for="origin-type">Ø§Ø®ØªØ± Ø§Ù„Ø£ØµÙ„:</label>
      <select id="origin-type">
        <option value="all">Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£ØµÙˆÙ„</option>
        <option value="Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠ">Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠ</option>
        <option value="ÙØ±Ù†Ø³ÙŠ">ÙØ±Ù†Ø³ÙŠ</option>
        <option value="ÙØ§Ø±Ø³ÙŠ">ÙØ§Ø±Ø³ÙŠ</option>
        <option value="ØªØ±ÙƒÙŠ">ØªØ±ÙƒÙŠ</option>
        <option value="Ø¥ÙŠØ·Ø§Ù„ÙŠ">Ø¥ÙŠØ·Ø§Ù„ÙŠ</option>
        <option value="Ø¥Ø³Ø¨Ø§Ù†ÙŠ">Ø¥Ø³Ø¨Ø§Ù†ÙŠ</option>
        <option value="ÙŠÙˆÙ†Ø§Ù†ÙŠ">ÙŠÙˆÙ†Ø§Ù†ÙŠ</option>
        <option value="Ø£Ù„Ù…Ø§Ù†ÙŠ">Ø£Ù„Ù…Ø§Ù†ÙŠ</option>
        <option value="Ù„Ø§ØªÙŠÙ†ÙŠ">Ù„Ø§ØªÙŠÙ†ÙŠ</option>
        <option value="Ù‡Ù†Ø¯ÙŠ">Ù‡Ù†Ø¯ÙŠ</option>
      </select>

      <button id="search-btn">
        <span id="btn-text">Ø¨Ø­Ø«</span>
        <span id="btn-loading" class="loading" style="display: none;"></span>
      </button>
    </div>

    <div id="results-container" class="results-section">
      <!-- Ø³ÙŠØªÙ… Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ù‡Ù†Ø§ -->
    </div>
  </div>

  <!-- âœ… Ø§Ù„ÙÙˆØªØ± Ø§Ù„Ø¬Ø¯ÙŠØ¯ -->
  <footer>
    <a href="index.html">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
    <a href="project.html">Ø¹Ù† Ø§Ù„Ù…Ø´Ø±ÙˆØ¹</a>
    <a href="tools.html">Ø£Ø¯ÙˆØ§Øª Ø£Ø®Ø±Ù‰</a>
    <a href="contact.html">Ø§ØªØµÙ„ Ø¨Ù†Ø§</a>
  </footer>

  <script>
    // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø¨Ø§Ø´Ø±Ø© Ø¯ÙˆÙ† fetch Ù„Ù„ØªÙˆØ¨ Ø¨Ø§Ø± ÙˆØ§Ù„ÙÙˆØªØ±
    // Ù…ØªØºÙŠØ± Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„ÙƒÙ„Ù…Ø§Øª Ø¨Ø¹Ø¯ Ø¬Ù„Ø¨Ù‡Ø§
    let borrowedWords = [];

    // Ø¹Ù†Ø§ØµØ± DOM
    const searchBtn = document.getElementById('search-btn');
    const btnText = document.getElementById('btn-text');
    const btnLoading = document.getElementById('btn-loading');
    const input = document.getElementById('word-input');
    const originSelect = document.getElementById('origin-type');
    const resultsContainer = document.getElementById('results-container');

    // Ø¯Ø§Ù„Ø© Ù„ØªÙØ¹ÙŠÙ„/ØªØ¹Ø·ÙŠÙ„ Ø²Ø± Ø§Ù„Ø¨Ø­Ø«
    function toggleButtonState(loading) {
      if (loading) {
        searchBtn.disabled = true;
        btnText.style.display = 'none';
        btnLoading.style.display = 'inline-block';
      } else {
        searchBtn.disabled = false;
        btnText.style.display = 'inline-block';
        btnLoading.style.display = 'none';
      }
    }

    // Ø¯Ø§Ù„Ø© Ù„Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† Ù…Ù„Ù JSON
    async function loadBorrowedWords() {
      try {
        toggleButtonState(true);
        const response = await fetch('/data/loan.json');
        
        if (!response.ok) {
          throw new Error(`Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª: ${response.status} ${response.statusText}`);
        }
        
        borrowedWords = await response.json();
        console.log(`ØªÙ… ØªØ­Ù…ÙŠÙ„ ${borrowedWords.length} ÙƒÙ„Ù…Ø© Ø¨Ù†Ø¬Ø§Ø­`);
        
        // Ø¹Ø±Ø¶ Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙƒÙ„Ù…Ø§Øª Ø¨Ø¹Ø¯ ØªØ­Ù…ÙŠÙ„Ù‡Ø§
        displayWords(borrowedWords);
        toggleButtonState(false);
      } catch (error) {
        console.error('Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:', error);
        resultsContainer.innerHTML = `
          <div class="error-message">
            <p>âŒ Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</p>
            <p>${error.message}</p>
            <p>ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ù…Ù„Ù /data/loan.json</p>
          </div>
        `;
        toggleButtonState(false);
      }
    }

    // Ø¯Ø§Ù„Ø© Ù„Ø¹Ø±Ø¶ Ø§Ù„ÙƒÙ„Ù…Ø§Øª
    function displayWords(words) {
      resultsContainer.innerHTML = "";
      
      if (words.length === 0) {
        resultsContainer.innerHTML = `<p style="color:#888;">Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ù†ØªØ§Ø¦Ø¬ ØªØ·Ø§Ø¨Ù‚ Ø§Ù„Ø¨Ø­Ø«.</p>`;
        return;
      }

      words.forEach(word => {
        const card = document.createElement('div');
        card.className = 'result-card';
        
        let content = `
          <div class="arabic-word">${word.arabic}</div>
          <div class="origin-label">Ø§Ù„Ø£ØµÙ„: ${word.origin}</div>
          ${word.original ? `<div class="origin">Ø§Ù„ÙƒÙ„Ù…Ø© Ø§Ù„Ø£ØµÙ„ÙŠØ©: ${word.original}</div>` : ''}
          <div class="meaning-label">Ø§Ù„Ù…Ø¹Ù†Ù‰ Ø£Ùˆ Ø§Ù„Ø§Ø³ØªØ¹Ù…Ø§Ù„</div>
          <div class="meaning">${word.meaning}</div>
        `;
        
        card.innerHTML = content;
        resultsContainer.appendChild(card);
      });
    }

    // Ø¯Ø§Ù„Ø© Ù„Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„ÙƒÙ„Ù…Ø§Øª
    function searchWords() {
      const searchTerm = input.value.trim().toLowerCase();
      const selectedOrigin = originSelect.value;
      
      // ØªÙØ¹ÙŠÙ„ Ø­Ø§Ù„Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„
      toggleButtonState(true);
      
      // Ù…Ø­Ø§ÙƒØ§Ø© ÙˆÙ‚Øª Ø§Ù„ØªØ­Ù…ÙŠÙ„ Ù„ØªØ­Ø³ÙŠÙ† ØªØ¬Ø±Ø¨Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
      setTimeout(() => {
        let filteredWords = borrowedWords;
        
        // ØªØµÙÙŠØ© Ø­Ø³Ø¨ Ø§Ù„Ø¨Ø­Ø« Ø§Ù„Ù†ØµÙŠ
        if (searchTerm) {
          filteredWords = filteredWords.filter(word => 
            word.arabic.toLowerCase().includes(searchTerm) || 
            (word.meaning && word.meaning.toLowerCase().includes(searchTerm)) ||
            (word.original && word.original.toLowerCase().includes(searchTerm))
          );
        }
        
        // ØªØµÙÙŠØ© Ø­Ø³Ø¨ Ø§Ù„Ø£ØµÙ„
        if (selectedOrigin !== "all") {
          filteredWords = filteredWords.filter(word => word.origin === selectedOrigin);
        }
        
        // Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªØ§Ø¦Ø¬
        displayWords(filteredWords);
        
        // Ø¥Ù„ØºØ§Ø¡ Ø­Ø§Ù„Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„
        toggleButtonState(false);
      }, 300);
    }

    // Ù…Ø¹Ø§Ù„Ø¬ Ø­Ø¯Ø« Ø§Ù„Ø¨Ø­Ø«
    searchBtn.addEventListener('click', searchWords);

    // Ø§Ù„Ø¨Ø­Ø« Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„ÙƒØªØ§Ø¨Ø©
    input.addEventListener('input', searchWords);

    // Ø§Ù„Ø¨Ø­Ø« Ø¹Ù†Ø¯ ØªØºÙŠÙŠØ± Ù†ÙˆØ¹ Ø§Ù„Ø£ØµÙ„
    originSelect.addEventListener('change', searchWords);

    // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
    window.addEventListener('load', () => {
      loadBorrowedWords();
    });
  </script>
</body>
</html>
