<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>بَيْن - الكلمات الدخيلة على العربية</title>
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700&display=swap" rel="stylesheet">

  <style>
    /* =========================================
       1. متغيرات التصميم الحديث (Modern Design)
       ========================================= */
    :root {
      --primary-color: #0e6666;
      --secondary-color: #4fc3c3;
      --bg-light: #f8fbfb;
      --text-dark: #333;
      --card-shadow: 0 10px 30px rgba(14, 102, 102, 0.08);
      --radius: 16px;
    }

    * {
      box-sizing: border-box;
      font-family: 'Cairo', sans-serif;
    }

    body {
      margin: 0;
      background-color: var(--bg-light); /* خلفية فاتحة عصرية */
      color: var(--text-dark);
      text-align: center;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }

    /* =========================================
       2. التوب بار (كما هو تماماً)
       ========================================= */
    header {
      background-color: #0e6666;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 10px 25px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }

    header img {
      height: 45px;
      border-radius: 10px;
    }

    header h1 {
      font-size: 20px;
      color: #004f4f;
      margin: 0;
      font-weight: 700;
    }

    /* =========================================
       3. منطقة المحتوى (تصميم حديث)
       ========================================= */
    .main-wrapper {
      flex: 1;
      width: 100%;
      max-width: 1200px;
      margin: 0 auto;
      padding: 40px 20px;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    /* صندوق البحث - تصميم أبيض نظيف */
    .search-container {
      width: 100%;
      max-width: 800px;
      background: #ffffff;
      padding: 35px;
      border-radius: var(--radius);
      box-shadow: var(--card-shadow);
      margin-bottom: 40px;
      border: 1px solid rgba(14, 102, 102, 0.05);
      text-align: right;
    }

    .form-group {
      margin-bottom: 20px;
    }

    label {
      display: block;
      margin-bottom: 10px;
      font-weight: 700;
      color: var(--primary-color);
      font-size: 1rem;
    }

    /* حقول الإدخال */
    input, select {
      width: 100%;
      padding: 15px 20px;
      border-radius: 12px;
      border: 2px solid #eef2f2;
      font-size: 16px;
      background-color: #fcfcfc;
      transition: all 0.3s ease;
      color: var(--text-dark);
      text-align: center;
    }

    input:focus, select:focus {
      border-color: var(--secondary-color);
      outline: none;
      background-color: #fff;
      box-shadow: 0 0 0 4px rgba(79, 195, 195, 0.1);
    }

    /* زر البحث */
    button {
      width: 100%;
      padding: 16px;
      background-color: var(--secondary-color);
      border: none;
      border-radius: 12px;
      font-size: 1.1rem;
      font-weight: 700;
      cursor: pointer;
      color: #fff;
      transition: all 0.3s ease;
      margin-top: 10px;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    button:hover {
      background-color: var(--primary-color);
    }

    button:disabled {
      background-color: #cccccc;
      cursor: not-allowed;
    }

    /* =========================================
       4. عرض النتائج (Grid System)
       ========================================= */
    .results-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
      gap: 30px;
      width: 100%;
    }

    .result-card {
      background-color: #fff;
      border-radius: var(--radius);
      padding: 30px;
      box-shadow: var(--card-shadow);
      position: relative;
      overflow: hidden;
      text-align: right;
      border: 1px solid rgba(0,0,0,0.03);
      /* لا توجد حركة عند الهوفر */
    }

    /* شريط علوي ملون */
    .result-card::before {
      content: '';
      position: absolute;
      top: 0;
      right: 0;
      left: 0;
      height: 6px;
      background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
    }

    .arabic-word {
      font-size: 2rem;
      font-weight: 700;
      color: var(--primary-color);
      margin-bottom: 15px;
      padding-bottom: 15px;
      border-bottom: 1px solid #f0f0f0;
    }

    .origin-label {
      display: inline-block;
      background-color: var(--primary-color);
      color: white;
      border-radius: 8px;
      padding: 4px 12px;
      font-size: 0.9rem;
      margin-bottom: 15px;
      font-weight: 600;
    }

    .meaning-label {
      display: inline-block;
      background-color: #f9a826;
      color: white;
      border-radius: 8px;
      padding: 4px 12px;
      font-size: 0.9rem;
      margin-bottom: 10px;
      margin-top: 15px;
      font-weight: 600;
    }

    .origin, .meaning {
      margin: 5px 0 0 0;
      font-size: 1.1rem;
      line-height: 1.7;
      color: #555;
    }

    .origin {
      color: var(--text-dark);
      font-weight: 600;
    }

    /* رسائل الخطأ والتحميل */
    .loading {
      display: inline-block;
      width: 24px;
      height: 24px;
      border: 3px solid rgba(255,255,255,.3);
      border-radius: 50%;
      border-top-color: #fff;
      animation: spin 1s ease-in-out infinite;
    }

    .error-message {
      grid-column: 1 / -1;
      background-color: #fff1f0;
      border: 1px solid #ffa39e;
      border-radius: var(--radius);
      padding: 20px;
      color: #cf1322;
      font-weight: bold;
    }

    @keyframes spin { to { transform: rotate(360deg); } }

    /* =========================================
       5. الفوتر (كما هو تماماً)
       ========================================= */
    footer {
      background-color: #eafafa;
      border-top: 2px solid #4fc3c3;
      padding: 20px;
      text-align: center;
      margin-top: auto;
    }

    footer a {
      color: #007b7b;
      text-decoration: none;
      margin: 0 10px;
      font-weight: 600;
    }

    footer a:hover {
      text-decoration: underline;
    }

    /* تحسينات للشاشات الكبيرة */
    @media (min-width: 768px) {
      .form-row-desktop {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 25px;
        align-items: end;
      }
      
      .full-width-btn {
        grid-column: 1 / -1;
      }
    }
  </style>
</head>

<body>
  <header>
    <img src="images/logo.PNG" alt="شعار بين">
  </header>

  <div class="main-wrapper">
    
    <div class="search-container">
      
      <div class="form-row-desktop">
        <div class="form-group">
          <label for="word-input">ابحث عن كلمة:</label>
          <input type="text" id="word-input" placeholder="اكتب الكلمة (بالعربية)">
        </div>

        <div class="form-group">
          <label for="origin-type">اختر الأصل:</label>
          <select id="origin-type">
            <option value="all">جميع الأصول</option>
            <option value="إنجليزي">إنجليزي</option>
            <option value="فرنسي">فرنسي</option>
            <option value="فارسي">فارسي</option>
            <option value="تركي">تركي</option>
            <option value="إيطالي">إيطالي</option>
            <option value="إسباني">إسباني</option>
            <option value="يوناني">يوناني</option>
            <option value="ألماني">ألماني</option>
            <option value="لاتيني">لاتيني</option>
            <option value="هندي">هندي</option>
          </select>
        </div>

        <button id="search-btn" class="full-width-btn">
          <span id="btn-text">بحث</span>
          <span id="btn-loading" class="loading" style="display: none;"></span>
        </button>
      </div>

    </div>

    <div id="results-container" class="results-grid">
      </div>
  </div>

  <footer>
    <a href="index.html">الرئيسية</a>
    <a href="project.html">عن المشروع</a>
    <a href="tools.html">أدوات أخرى</a>
    <a href="contact.html">اتصل بنا</a>
  </footer>

  <script>
    // متغير لتخزين الكلمات
    let borrowedWords = [];

    // عناصر DOM
    const searchBtn = document.getElementById('search-btn');
    const btnText = document.getElementById('btn-text');
    const btnLoading = document.getElementById('btn-loading');
    const input = document.getElementById('word-input');
    const originSelect = document.getElementById('origin-type');
    const resultsContainer = document.getElementById('results-container');

    // دالة لتفعيل/تعطيل زر البحث
    function toggleButtonState(loading) {
      if (loading) {
        searchBtn.disabled = true;
        btnText.style.display = 'none';
        btnLoading.style.display = 'inline-block';
      } else {
        searchBtn.disabled = false;
        btnText.style.display = 'inline-block';
        btnLoading.style.display = 'none';
      }
    }

    // دالة لجلب البيانات
    async function loadBorrowedWords() {
      try {
        toggleButtonState(true);
        const response = await fetch('/data/loan.json');
        
        if (!response.ok) {
          throw new Error(`خطأ في جلب البيانات`);
        }
        
        borrowedWords = await response.json();
        console.log(`تم تحميل ${borrowedWords.length} كلمة بنجاح`);
        
        displayWords(borrowedWords);
        toggleButtonState(false);
      } catch (error) {
        console.error(error);
        resultsContainer.innerHTML = `
          <div class="error-message">
            <p>❌ حدث خطأ في تحميل البيانات، يرجى التأكد من المصدر.</p>
          </div>
        `;
        toggleButtonState(false);
      }
    }

    // دالة لعرض الكلمات
    function displayWords(words) {
      resultsContainer.innerHTML = "";
      
      if (words.length === 0) {
        resultsContainer.innerHTML = `<p style="grid-column: 1 / -1; color:#888;">لم يتم العثور على نتائج تطابق البحث.</p>`;
        return;
      }

      words.forEach(word => {
        const card = document.createElement('div');
        card.className = 'result-card';
        
        let content = `
          <div class="arabic-word">${word.arabic}</div>
          <div class="origin-label">الأصل: ${word.origin}</div>
          ${word.original ? `<div class="origin">الكلمة الأصلية: ${word.original}</div>` : ''}
          <div class="meaning-label">المعنى أو الاستعمال</div>
          <div class="meaning">${word.meaning}</div>
        `;
        
        card.innerHTML = content;
        resultsContainer.appendChild(card);
      });
    }

    // دالة للبحث
    function searchWords() {
      const searchTerm = input.value.trim().toLowerCase();
      const selectedOrigin = originSelect.value;
      
      toggleButtonState(true);
      
      setTimeout(() => {
        let filteredWords = borrowedWords;
        
        if (searchTerm) {
          filteredWords = filteredWords.filter(word => 
            word.arabic.toLowerCase().includes(searchTerm) || 
            (word.meaning && word.meaning.toLowerCase().includes(searchTerm)) ||
            (word.original && word.original.toLowerCase().includes(searchTerm))
          );
        }
        
        if (selectedOrigin !== "all") {
          filteredWords = filteredWords.filter(word => word.origin === selectedOrigin);
        }
        
        displayWords(filteredWords);
        toggleButtonState(false);
      }, 300);
    }

    // الأحداث
    searchBtn.addEventListener('click', searchWords);
    input.addEventListener('input', searchWords);
    originSelect.addEventListener('change', searchWords);

    window.addEventListener('load', () => {
      loadBorrowedWords();
    });
  </script>
</body>
</html>
